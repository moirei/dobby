<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>CRUD | Dobby</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/dobby/logo.png">
    <link rel="apple-touch-icon" href="/dobby/icons/apple-touch-icon-152x152.png">
    <meta name="description" content="GraphQL data models made easy.">
    <meta property="og:site_name" content="Dobby">
    <meta property="og:title" content="CRUD">
    <meta property="og:type" content="website">
    <meta property="og:url" content="/guide/models/crud.html">
    <meta name="twitter:title" content="CRUD">
    <meta name="twitter:url" content="/guide/models/crud.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/dobby/assets/css/0.styles.dfa1a5cf.css" as="style"><link rel="preload" href="/dobby/assets/js/app.d1fa0665.js" as="script"><link rel="preload" href="/dobby/assets/js/2.0c3bff11.js" as="script"><link rel="preload" href="/dobby/assets/js/12.ff9a7298.js" as="script"><link rel="prefetch" href="/dobby/assets/js/10.c8a66029.js"><link rel="prefetch" href="/dobby/assets/js/11.ba11236c.js"><link rel="prefetch" href="/dobby/assets/js/13.c7120bd2.js"><link rel="prefetch" href="/dobby/assets/js/14.22eb13c3.js"><link rel="prefetch" href="/dobby/assets/js/15.715851fc.js"><link rel="prefetch" href="/dobby/assets/js/16.8fbed22f.js"><link rel="prefetch" href="/dobby/assets/js/17.78ff0958.js"><link rel="prefetch" href="/dobby/assets/js/18.9ff9f214.js"><link rel="prefetch" href="/dobby/assets/js/19.164b8e25.js"><link rel="prefetch" href="/dobby/assets/js/20.3f73a18f.js"><link rel="prefetch" href="/dobby/assets/js/21.5e75273a.js"><link rel="prefetch" href="/dobby/assets/js/22.4ba21d7e.js"><link rel="prefetch" href="/dobby/assets/js/23.5cc52852.js"><link rel="prefetch" href="/dobby/assets/js/24.5a7ec6d9.js"><link rel="prefetch" href="/dobby/assets/js/3.396b1a95.js"><link rel="prefetch" href="/dobby/assets/js/4.6cf1e0cf.js"><link rel="prefetch" href="/dobby/assets/js/5.1214c687.js"><link rel="prefetch" href="/dobby/assets/js/6.16373f7f.js"><link rel="prefetch" href="/dobby/assets/js/7.5f58fcfe.js"><link rel="prefetch" href="/dobby/assets/js/8.7044b974.js"><link rel="prefetch" href="/dobby/assets/js/9.d306db64.js">
    <link rel="stylesheet" href="/dobby/assets/css/0.styles.dfa1a5cf.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/dobby/" class="home-link router-link-active"><!----> <span class="site-name">Dobby</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/dobby/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/dobby/installation.html" class="nav-link">
  Guide
</a></div> <a href="https://github.com/moirei/dobby" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/dobby/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/dobby/installation.html" class="nav-link">
  Guide
</a></div> <a href="https://github.com/moirei/dobby" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/dobby/configuration.html" class="sidebar-link">Configuration</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Models</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dobby/guide/models/define-models.html" class="sidebar-link">Defining Models</a></li><li><a href="/dobby/guide/models/conventions.html" class="sidebar-link">Conventions</a></li><li><a href="/dobby/guide/models/crud.html" aria-current="page" class="active sidebar-link">CRUD</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dobby/guide/models/crud.html#creating-models" class="sidebar-link">Creating Models</a></li><li class="sidebar-sub-header"><a href="/dobby/guide/models/crud.html#retrieving-models" class="sidebar-link">Retrieving Models</a></li><li class="sidebar-sub-header"><a href="/dobby/guide/models/crud.html#count" class="sidebar-link">Count</a></li><li class="sidebar-sub-header"><a href="/dobby/guide/models/crud.html#updates" class="sidebar-link">Updates</a></li><li class="sidebar-sub-header"><a href="/dobby/guide/models/crud.html#deleting-models" class="sidebar-link">Deleting Models</a></li></ul></li><li><a href="/dobby/guide/models/fields.html" class="sidebar-link">Fields &amp; Attributes</a></li><li><a href="/dobby/guide/models/decorators.html" class="sidebar-link">Field Decorators</a></li><li><a href="/dobby/guide/models/hooks.html" class="sidebar-link">Hooks</a></li><li><a href="/dobby/guide/models/customising-models.html" class="sidebar-link">Customising Models</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/dobby/guide/query-builder/" class="sidebar-heading clickable"><span>Query Builder</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/dobby/guide/query-builder/select-fields.html" class="sidebar-link">Select fields</a></li><li><a href="/dobby/guide/query-builder/query-arguments.html" class="sidebar-link">Arguments</a></li><li><a href="/dobby/guide/query-builder/relationships.html" class="sidebar-link">Relationships</a></li><li><a href="/dobby/guide/query-builder/dynamic-query-operations.html" class="sidebar-link">Dynamic Query Operations</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Advanced</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dobby/guide/advanced/adapters.html" class="sidebar-link">Adapters</a></li><li><a href="/dobby/guide/advanced/field-builders.html" class="sidebar-link">Field Builders</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="crud"><a href="#crud" class="header-anchor">#</a> CRUD</h1> <p>Interpretation of the CRUD operations is handled by the client adapter. The default adapter is made for Prisma backends in mind. To customise this behaviour, instantiate the Dobby client with a custom adapter. You can also use Hooks to override operations at individual model level.</p> <p>The CRUD methods are patterned after the <a href="https://www.opencrud.org/" target="_blank" rel="noopener noreferrer">OpenCRUD<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> standard.</p> <p>When using the <code>create</code>, <code>update</code>, <code>upsert</code> methods, ensure the provided input data are properly formatted for your backend.</p> <h2 id="creating-models"><a href="#creating-models" class="header-anchor">#</a> Creating Models</h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token keyword">await</span> User<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The <code>$save</code> method may also be used to create instantiated models.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">await</span> user<span class="token punctuation">.</span><span class="token function">$save</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The <code>createMany</code> method can also used to create multiple records.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> users <span class="token operator">=</span> <span class="token keyword">await</span> User<span class="token punctuation">.</span><span class="token function">createMany</span><span class="token punctuation">(</span><span class="token punctuation">[</span>user1Data<span class="token punctuation">,</span> user2Data<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The default adapter translates this into a <code>createManyUsers</code> mutation.</p> <p>It's generally important to be able to differentiate created (persisted) records from transient instances. Dobby considers model instances with defined primary keys in the <code>original</code> attributes container to be <em>existing</em>.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> user1 <span class="token operator">=</span> <span class="token keyword">await</span> User<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> user2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;James Franco&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> user3 <span class="token operator">=</span> User<span class="token punctuation">.</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;John Doe&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> user4 <span class="token operator">=</span> User<span class="token punctuation">.</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&quot;Joe Blow&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

user1<span class="token punctuation">.</span><span class="token function">$exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// returns true</span>
user2<span class="token punctuation">.</span><span class="token function">$exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// returns false</span>
user3<span class="token punctuation">.</span><span class="token function">$exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// returns false</span>
user4<span class="token punctuation">.</span><span class="token function">$exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// returns true</span>
</code></pre></div><p>Note that the Query Builder automatically adds the primary key field to the query fields such that</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token keyword">await</span> User<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&quot;John Doe&quot;</span><span class="token punctuation">,</span>
  email<span class="token operator">:</span> <span class="token string">&quot;john@domain.com&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>will be executed as</p> <div class="language-graphql extra-class"><pre class="language-graphql"><code><span class="token keyword">mutation</span> <span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">:</span> <span class="token atom-input class-name">UserCreateInput</span><span class="token operator">!</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token property-query">createOneUser</span><span class="token punctuation">(</span><span class="token attr-name">data</span><span class="token punctuation">:</span> <span class="token variable">$data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token property">id</span>
    <span class="token property">name</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The returned value of <code>id</code> is used to hidrate the created instance, allowing calling <code>$exists</code> on the instance to return <code>true</code>.</p> <h2 id="retrieving-models"><a href="#retrieving-models" class="header-anchor">#</a> Retrieving Models</h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token keyword">await</span> User<span class="token punctuation">.</span><span class="token function">findUnique</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The <code>find</code> method can be used instead.</p> <p>To retrieve multiple records, the <code>findMany</code> or <code>all</code> methods can be used.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> users <span class="token operator">=</span> <span class="token keyword">await</span> User<span class="token punctuation">.</span><span class="token function">findMany</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Retrieved user(s) are always of type <code>User</code>. However, in some cases you might prefer a basic JSON object. Dobby supplies the <code>$tojson</code> method for this.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> object <span class="token operator">=</span> user<span class="token punctuation">.</span><span class="token function">$toJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>This will return all attribute values, including the JSON objects of related models.</p> <h3 id="hot-find-unique"><a href="#hot-find-unique" class="header-anchor">#</a> Hot Find Unique</h3> <p>To retrieve a model and quickly return an instance while its contents are being fetched, you may use the <code>hotFindUnque</code> method.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span><span class="token punctuation">{</span>
  <span class="token keyword">static</span> entity <span class="token operator">=</span> <span class="token string">'User'</span><span class="token punctuation">;</span>

  <span class="token operator">...</span>
  <span class="token keyword">get</span> <span class="token function">$loaded</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">!</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> user <span class="token operator">=</span> User<span class="token punctuation">.</span><span class="token function">hotFindUnque</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$loaded<span class="token punctuation">;</span> <span class="token comment">// return false</span>

<span class="token comment">// wait x ms</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$loaded<span class="token punctuation">;</span> <span class="token comment">// return true</span>
</code></pre></div><p>This setup may prove useful in reactive frontends.</p> <p>The method is not included in the Query Builder and can therefore only be used directly from a model class. To provide more query options you pass the a second argument which receives the query.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> user <span class="token operator">=</span> User<span class="token punctuation">.</span><span class="token function">hotFindUnque</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">query</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  query<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">include</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="count"><a href="#count" class="header-anchor">#</a> Count</h2> <p>You can also count records with the <code>count</code> method. This performs the <code>findMany</code> operation with the model's primary key as the only selected field.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token keyword">await</span> User<span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// or</span>
<span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token keyword">await</span> User<span class="token punctuation">.</span><span class="token function">newQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="updates"><a href="#updates" class="header-anchor">#</a> Updates</h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token keyword">await</span> User<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The <code>$save</code> method may also be used to update models.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token keyword">await</span> User<span class="token punctuation">.</span><span class="token function">findUnique</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">await</span> user<span class="token punctuation">.</span><span class="token function">$save</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Existing models can also be updated using the <code>$update</code> method. However, the below will not trigger an update as no changes has been made to the model.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> user <span class="token operator">=</span> User<span class="token punctuation">.</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  name<span class="token operator">:</span> <span class="token string">&quot;John&quot;</span><span class="token punctuation">,</span>
  email<span class="token operator">:</span> <span class="token string">&quot;john@mail.com&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">await</span> user<span class="token punctuation">.</span><span class="token function">$update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>You can also <em>Update or Create</em> a record with <code>upsert</code>.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token keyword">await</span> User<span class="token punctuation">.</span><span class="token function">upsert</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span>
    id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">&quot;John Doe&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&quot;John Doe&quot;</span><span class="token punctuation">,</span>
    email<span class="token operator">:</span> <span class="token string">&quot;john@mail.com&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>This will build and execute the follow query</p> <div class="language-graphql extra-class"><pre class="language-graphql"><code><span class="token keyword">mutation</span> <span class="token punctuation">(</span><span class="token variable">$where</span><span class="token punctuation">:</span> <span class="token atom-input class-name">UserWhereInput</span><span class="token operator">!</span><span class="token punctuation">,</span> <span class="token variable">$data</span><span class="token punctuation">:</span> <span class="token atom-input class-name">UserUpdateInput</span><span class="token operator">!</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token property-query">upsertOneUser</span><span class="token punctuation">(</span><span class="token attr-name">where</span><span class="token punctuation">:</span> <span class="token variable">$where</span><span class="token punctuation">,</span> <span class="token attr-name">data</span><span class="token punctuation">:</span> <span class="token variable">$data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token property">id</span>
    <span class="token property">name</span>
    <span class="token property">email</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="deleting-models"><a href="#deleting-models" class="header-anchor">#</a> Deleting Models</h2> <p>Existing models can be deleted by either using the <code>delete</code> method or the <code>$delete</code> method directly from the instance.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">await</span> User<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// same as</span>
<span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token keyword">await</span> User<span class="token punctuation">.</span><span class="token function">findUnique</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">await</span> user<span class="token punctuation">.</span>$<span class="token keyword">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/dobby/guide/models/conventions.html" class="prev">
        Conventions
      </a></span> <span class="next"><a href="/dobby/guide/models/fields.html">
        Fields &amp; Attributes
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/dobby/assets/js/app.d1fa0665.js" defer></script><script src="/dobby/assets/js/2.0c3bff11.js" defer></script><script src="/dobby/assets/js/12.ff9a7298.js" defer></script>
  </body>
</html>
